@model SupaSpeedGrader.Models.RubricModel
@{
    ViewBag.Title = "Rubric";
}
<head>
    <style>
        .noDisplay{
            display:none;
        }
        .yesDisplay{

        }
        .noShow {
            visibility: hidden;
        }

    </style>
</head>
<body>
    <div>
        <h2>Rubric</h2>
        </div>
    <div>
        <p>Rubric Name: <input type="text" style="height:20px; width:100px; border:1px solid black; background-color:transparent " id='rubrName' /> </p>
    </div>
    <div style="width:100%">
        <p>Number of Questions: <input type="number" style="height:20px; width:100px; border:1px solid black; background-color:transparent " id='numQuestions' onchange="questionNum(this)" /> </p>
    </div>
    <p id="action"></p>
    <p id="action2"></p>
    @for (int x = 1; x < 100; x++)
    {
        string questionNum = "questionNum" + x;
        string rubricNum = "rubricNum" + x;
        string rubricButton = "button" + x;
        string critNum = "crit" + x;
        string specNum = "spec" + x;
        <div class="noDisplay" id="@questionNum">
            <p>Question @x</p>
            <input type="button" value="+ Rubric" onclick="rubricNum(@x)" id="@rubricButton" />
            <div class="noDisplay" id="@rubricNum">

                <p>Number of Criteria <input type="number" style="height:20px; width:100px; border:1px solid black; background-color:transparent " id='@critNum' onchange="crit(this,@x)" value="0" /></p>
                <p>Number of Specifity <input type="number" style="height:20px; width:100px; border:1px solid black; background-color:transparent " id='@specNum' onchange="spec(this,@x)" value="0" /></p>
                @* row ->i; col -> j*@
                @for (int i = 0; i < 11; i++)
                {
                    <div style="display:flex">
                        @{string box = "box" + i + "," + 0 + "of" + x;
                            string al = box + "n";
                        }
                        <div id="@box" style="float:left; width :10%:; " class="noDisplay">
                            <p style="font-size:80%"> Criteria Name </p>
                            <input type="text" style="height:20px; width:50px; border:1px solid black; background-color:transparent " id='@al' />
                        </div>
                        @for (int j = 1; j < 9; j++)
                        {
                            box = "box" + i + "," + j + "of" + x;
                            string points = box + "p";
                            string comment = box + "c";


                            <div id="@box" style="float:left; width :11.25%" class="noDisplay">
                                <p style="font-size:80%"> Points <input type="number" style="height:20px; width:50px; border:1px solid black; background-color:transparent " id='@points'  /></p>
                                <p style="font-size:80%">Comment <input type="text" style="height:20px; width:50px; border:1px solid black; background-color:transparent " id='@comment' /></p>
                            </div>
                        }
                    </div>
                }

            </div>
        </div>

    }
    <input type="button" value="Submit" onclick="submitData()" />
    <script>
        var rubricNums = new Array();
        var rubricData = new Map();
        var rubricName;
        var questNum;
        var first = 0;
        function questionNum(source) {
            for (var b = 1; b <= source.value; b++) {
                var quest = "questionNum" + b;
                document.getElementById(quest).className = "yesDisplay";
            }
        }
        function rubricNum(x) {
            var rubr = "rubricNum" + x;
            document.getElementById(rubr).className = "yesDisplay";
            rubr = "button" + x;
            document.getElementById(rubr).className = "noDisplay";
            rubricNums.push(x);

        }
        function crit(source, a) {
            var crit = "spec" + a;
            var critNum = document.getElementById(crit).value
            var e = source.value;
            for (var c = 0; c < e; c++) {
                var quest = "box" + c + "," + "0" + "of" + a;
                document.getElementById(quest).className = "yesDisplay";
                document.getElementById(quest).style.backgroundColor = "lightgrey";
                document.getElementById(quest).style.border = "1px solid black";
                critNum++;
                for (var b = critNum; b < 9; ++b) {
                    quest = "box" + c + "," + b + "of" + a;
                    document.getElementById(quest).className = "noShow";
                }
            }
            for (var c = e; c < 11; c++) {
                for (var b = 0; b < 9; ++b) {
                    quest = "box" + c + "," + b + "of" + a;
                    document.getElementById(quest).className = "noDisplay";
                }
            }

        }
        function spec(source, a) {
            var crit = "crit" + a;
            var critNum = document.getElementById(crit).value
            var d = source.value;
            d++;
            for (var c = 0; c < critNum; c++) {
                for (var b = 1; b < d; b++) {
                    var quest = "box" + c + "," + b + "of" + a;
                    document.getElementById(quest).className = "yesDisplay";
                    document.getElementById(quest).style.border = "1px solid black";
                }
                for (var b = d; b < 9; ++b) {
                    var quest = "box" + c + "," + b + "of" + a;
                    document.getElementById(quest).className = "noShow";
                }
            }

        }
        function submitData() {
            document.getElementById("action").innerHTML = "start";
            rubricName = document.getElementById("rubrName").value; 
            questNum = document.getElementById("numQuestions").value; 
            for (var i = 0; i < rubricNums.length; ++i) {
                var spec = "spec" + rubricNums[i];
                var specNum = document.getElementById(spec).value; 
                var crit = "crit" + rubricNums[i];
                var critNum = document.getElementById(crit).value;
                var ques = new Array();
                for (var j = 0; j < critNum; ++j) {
                    var specPos = new Array();
                    var quest = "box" + j + "," + 0 + "of" + rubricNums[i] + "n";
                    var pointComments = new Array();
                    pointComments.push(document.getElementById(quest).value);
                    specPos.push(pointComments); 
                    for (var k = 1; k <= specNum; ++k) {
                        pointComments = new Array();
                        quest = "box" + j + "," + k + "of" + rubricNums[i] + "p";
                        pointComments.push(document.getElementById(quest).value);
                        quest = "box" + j + "," + k + "of" + rubricNums[i] + "c";
                        pointComments.push(document.getElementById(quest).value);
                        specPos.push(pointComments);
                        
                    }                 
                    ques.push(specPos);
                }
                rubricData.set(rubricNums[i], ques);
            }
            document.getElementById("action").innerHTML = rubricNums[0];
            document.getElementById("action2").innerHTML = rubricData.get(rubricNums[0]);      
        }
    </script>
</body>
